--- 
title_meta  : บทที่ 5
title       : Data frames
description : Data set ส่วนใหญ่ที่คุณจะใช้ทำงานบน R จะถูกเก็บอยู่ในรูปของ data frames เมื่อจบบทนี้ คุณจะสามารถสร้าง data frame, เลือกข้อมูลบางส่วนจาก data frame และจัดเรียงข้อมูลตามตัวแปรบางตัวใน data frame ได้

--- type:NormalExercise xp:100 skills:1 key:7f95849020a2563168920409022ce7bed20835b5
## Data Frame คืออะไร?

ถ้าคุณยังจำเนื้อหาจากบทที่ 3 (matrix) ได้ ข้อมูลทุกตัวที่ใส่ลงไปใน matrix ควรเป็นประเภทเดียวกัน ในตอนนั้นข้อมูลเกี่ยวกับภาพยนตร์ Star Wars ของคุณจึงมีแต่ตัวเลขรายได้

แต่ในเวลาที่คุณต้องการวิเคราะห์ข้อมูลทางการตลาด บ่อยครั้งที่คุณจะต้องเจอกับคำถามเช่น:

- 'คุณแต่งงานหรือยัง?' หรือพวกคำถามที่ให้ตอบ 'ใช่/ไม่' ทั้งหลาย (เป็นข้อมูลแบบ `logical`)
- 'คุณอายุเท่าไร?' (เป็นข้อมูลแบบ `numeric`)
- 'คุณมีความเห็นอย่างไรกับผลิตภัณฑ์นี้?' หรือ 'คำถามปลายเปิด' อื่นๆ (เป็นข้อมูลแบบ `character`)
- ...

จะเห็นได้ว่า data set ที่เราได้มานั้นจะประกอบไปด้วยข้อมูลหลากหลายประเภทมากๆ ซึ่งทำให้ Data frame เป็นสิ่งจำเป็นสำหรับการทำงานของคุณ 

Data frame จะเก็บค่าแค่ละตัวแปรของ data set ไว้ในรูปของคอลัมน์ และเก็บแต่ละตัวอย่าง(observation) ไว้ในรูปของแถว นี่คือ concept หลักที่ใช้กันทั่วไปไม่ว่าคุณจะทำงานบน R หรือโปรแกรมวิเคราะห์ทางสถิติอื่นๆ เช่น SAS หรือ SPSS

*** =instructions
กดปุ่ม 'Submit Answer' ข้อมูลจาก data frame ตัวอย่าง [`mtcars`](http://www.rdocumentation.org/packages/datasets/functions/mtcars) จะถูกแสดงออกมาบน Console

*** =hint
แค่กดปุ่ม 'Submit Answer' ก็พอ!

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# Print out built-in R data frame
mtcars 
```

*** =solution
```{r}
# Print out built-in R data frame
mtcars 
```

*** =sct
```{r}
incorrect_msg <- "&#3629;&#3618;&#3656;&#3634;&#3648;&#3611;&#3621;&#3637;&#3656;&#3618;&#3609;&#3649;&#3611;&#3621;&#3591;&#3650;&#3588;&#3657;&#3604;&#32;&#3649;&#3588;&#3656;&#3585;&#3604;&#3611;&#3640;&#3656;&#3617;&#32;&#39;&#83;&#117;&#98;&#109;&#105;&#116;&#32;&#65;&#110;&#115;&#119;&#101;&#114;&#39;&#32;&#3585;&#3655;&#3614;&#3629;&#3649;&#3621;&#3657;&#3623;"
# อย่าเปลี่ยนแปลงโค้ด แค่กดปุ่ม 'Submit Answer' ก็พอแล้ว

success_msg <- "&#3648;&#3618;&#3637;&#3656;&#3618;&#3617;&#3617;&#3634;&#3585;&#33;&#32;&#3652;&#3611;&#3649;&#3610;&#3610;&#3613;&#3638;&#3585;&#3627;&#3633;&#3604;&#3605;&#3656;&#3629;&#3652;&#3611;&#3585;&#3633;&#3609;&#3648;&#3621;&#3618;"
# เยี่ยมมาก! ไปแบบฝึกหัดต่อไปกันเลย

test_output_contains("mtcars", incorrect_msg = "Do not change anything about the code, Make sure that you output `mtcars`.")
success_msg("Great! Continue to the next exercise.")
```


--- type:NormalExercise xp:100 skills:1 key:3d0e64ecf5f69521ee538ecc713caa02b8b0ec46
## ลองมองดู Data Set

โอ้โห! นี่มันข้อมูลของรถเต็มไปหมด 

การทำงานกับ data set ขนาดใหญ่ถือเป็นเรื่องธรรมดามากกับงานวิเคราะห์ข้อมูล สิ่งแรกที่คุณต้องทำคือการทำความเข้าใจข้อมูลเหล่านั้นเสียก่อน ดังนั้นการสั่งให้ R แสดงค่าข้อมูลแค่ส่วนเล็กๆบางส่วนออกมาจึงมักมีประโยชน์ในการทำความเข้าใจข้อมูล

คุณสามารถใช้ function [`head()`](http://www.rdocumentation.org/packages/utils/functions/head) ในการแสดงตัวอย่างข้อมูลที่อยู่ด้านบนของ data frame ของคุณ หรือใช้ function [`tail()`](http://www.rdocumentation.org/packages/utils/functions/head) ในการแสดงตัวอย่างข้อมูลที่อยู่ด้านล่างก็ได้

ทั้ง function [`head()`](http://www.rdocumentation.org/packages/utils/functions/head) และ [`tail()`](http://www.rdocumentation.org/packages/utils/functions/head) จะแสดงชื่อคอลัมน์หรือที่เรียกว่า 'header' ออกมาด้วย ซึ่ง 'header' จะบอกคุณได้ว่าแต่ละตัวแปรในข้อมูลคืออะไร (ถ้าได้มีการกำหนดไว้)

*** =instructions
ลองใช้ [`head()`](http://www.rdocumentation.org/packages/utils/functions/head) กับ [`mtcars`](http://www.rdocumentation.org/packages/datasets/functions/mtcars) และลองดูตัวอย่างข้อมูลที่ถูกแสดงออกมา

*** =hint
`head(mtcars)` จะแสดงข้อมูลแถวแรกๆจาก `mtcars` ออกมา 

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# Call head() on mtcars

```

*** =solution
```{r}
# Call head() on mtcars
head(mtcars)
```

*** =sct
```{r}
function_msg <- paste("&#3588;&#3640;&#3603;&#3652;&#3604;&#3657;&#3651;&#3594;&#3657;&#32;&#102;&#117;&#110;&#99;&#116;&#105;&#111;&#110;", "`head()`", "&#3585;&#3633;&#3610;", "`mtcars`", "&#3627;&#3619;&#3639;&#3629;&#3618;&#3633;&#3591;&#63;")
# คุณได้ใช้ function `head()` กับ `mtcars` หรือยัง?

output_msg <- paste("&#3649;&#3588;&#3656;&#3649;&#3626;&#3604;&#3591;&#3612;&#3621;&#3621;&#3633;&#3614;&#3608;&#3660;&#3586;&#3629;&#3591;&#32;&#102;&#117;&#110;&#99;&#116;&#105;&#111;&#110;", "`head()`", "&#3629;&#3629;&#3585;&#3617;&#3634;&#3585;&#3655;&#3614;&#3629;&#32;&#3652;&#3617;&#3656;&#3605;&#3657;&#3629;&#3591;&#3648;&#3585;&#3655;&#3610;&#3588;&#3656;&#3634;&#3652;&#3623;&#3657;&#3651;&#3609;&#3605;&#3633;&#3623;&#3649;&#3611;&#3619;&#3651;&#3604;&#3654;")
# แค่แสดงผลลัพธ์ของ function `head()` ออกมาก็พอ ไม่ต้องเก็บค่าไว้ในตัวแปรใดๆ

success_msg <- paste("&#3648;&#3618;&#3637;&#3656;&#3618;&#3617;&#3652;&#3611;&#3648;&#3621;&#3618;&#33;&#32;&#3648;&#3619;&#3634;&#3617;&#3634;&#3621;&#3629;&#3591;&#3604;&#3641;&#3585;&#3633;&#3609;&#3623;&#3656;&#3634;&#32;&#100;&#97;&#116;&#97;&#32;&#115;&#101;&#116;&#32;&#3609;&#3637;&#3657;&#3617;&#3637;&#3629;&#3632;&#3652;&#3619;&#3610;&#3657;&#3634;&#3591;&#32;&#3618;&#3585;&#3605;&#3633;&#3623;&#3629;&#3618;&#3656;&#3634;&#3591;&#3648;&#3594;&#3656;&#3609;", "`hp`", "&#3649;&#3626;&#3604;&#3591;&#3606;&#3638;&#3591;&#3585;&#3635;&#3621;&#3633;&#3591;&#3649;&#3619;&#3591;&#3617;&#3657;&#3634;&#3586;&#3629;&#3591;&#3619;&#3606;&#3588;&#3633;&#3609;&#3609;&#3633;&#3657;&#3609;&#3654;&#32;&#68;&#97;&#116;&#115;&#117;&#110;&#32;&#3617;&#3637;&#3585;&#3635;&#3621;&#3633;&#3591;&#3649;&#3619;&#3591;&#3617;&#3657;&#3634;&#3605;&#3656;&#3635;&#3607;&#3637;&#3656;&#3626;&#3640;&#3604;&#3592;&#3634;&#3585;&#3619;&#3606;&#3607;&#3633;&#3657;&#3591;&#32;&#54;&#32;&#3588;&#3633;&#3609;&#3607;&#3637;&#3656;&#3606;&#3641;&#3585;&#3649;&#3626;&#3604;&#3591;&#3629;&#3629;&#3585;&#3617;&#3634;&#32;&#3651;&#3609;&#3585;&#3634;&#3619;&#3607;&#3635;&#3588;&#3623;&#3634;&#3617;&#3648;&#3586;&#3657;&#3634;&#3651;&#3592;&#3585;&#3633;&#3610;&#3588;&#3623;&#3634;&#3617;&#3627;&#3617;&#3634;&#3618;&#3586;&#3629;&#3591;&#3605;&#3633;&#3623;&#3649;&#3611;&#3619;&#3607;&#3640;&#3585;&#3605;&#3633;&#3623;&#32;&#3588;&#3640;&#3603;&#3626;&#3634;&#3617;&#3634;&#3619;&#3606;&#3614;&#3636;&#3617;&#3614;&#3660;", "`?mtcars`", "&#3621;&#3591;&#3652;&#3611;&#3651;&#3609;&#32;&#67;&#111;&#110;&#115;&#111;&#108;&#101;&#32;&#3648;&#3614;&#3639;&#3656;&#3629;&#3629;&#3656;&#3634;&#3609;&#3588;&#3635;&#3629;&#3608;&#3636;&#3610;&#3634;&#3618;&#3648;&#3614;&#3636;&#3656;&#3617;&#3648;&#3605;&#3636;&#3617;&#3652;&#3604;&#3657;")
# เยี่ยมไปเลย! เรามาลองดูกันว่า data set นี้มีอะไรบ้าง ยกตัวอย่างเช่น `hp` แสดงถึงกำลังแรงม้าของรถคันนั้นๆ Datsun มีกำลังแรงม้าต่ำที่สุดจากรถทั้ง 6 คันที่ถูกแสดงออกมา ในการทำความเข้าใจกับความหมายของตัวแปรทุกตัว คุณสามารถพิมพ์ `?mtcars` ลงไปใน Console เพื่ออ่านคำอธิบายเพิ่มเติมได้

test_function("head", "x", incorrect_msg = function_msg)
test_output_contains("head(mtcars)", incorrect_msg = output_msg)
success_msg(success_msg);
```


--- type:NormalExercise xp:100 skills:1 key:f4d5b1a2c4aef31645fc7e3505e699fb6e48f3e6
## ลองดูที่ Structure

อีกวิธีหนึ่งที่เป็นที่นิยมในการดูภาพรวมของข้อมูล คือการใช้ function [`str()`](http://www.rdocumentation.org/packages/utils/functions/str) ในการแสดงโครงสร้างของ data set ของคุณ ซึ่ง function นี้จะบอกคุณเกี่ยวกับ:

- จำนวนตัวอย่าง(observation) ใน data set (เช่น มีรถยนต์ 32 ประเภท)
- จำนวนตัวแปรทั้งหมด (เช่น มี features ทั้งหมด 11 features)
- พร้อมด้วยชื่อของตัวแปรทั้งหมด (เช่น `mpg`, `cyl` ... )
- ประเภทของข้อมูลของตัวแปรแต่ละตัว (เช่น `num` แสดงว่าเป็นตัวแปรประเภทตัวเลข)
- ตัวอย่างแรกสุดใน data frame

การใช้ function [`str()`](http://www.rdocumentation.org/packages/utils/functions/str) กับข้อมูลอาจจะเป็นสิ่งแรกที่คุณทำเมื่อคุณได้ข้อมูลมา มันเป็นวิธีที่ดีที่จะทำความเข้าใจ data set ก่อนจะเริ่มทำการวิเคราะห์จริงๆ

*** =instructions
ลองดูโครงสร้างของ [`mtcars`](http://www.rdocumentation.org/packages/datasets/functions/mtcars) ตรวจสอบให้แน่ใจว่าคุณเห็นตัวเลขเดียวกับที่เขียนไว้ด้านบนในตัวอย่าง

*** =hint
ใช้ function [`str()`](http://www.rdocumentation.org/packages/utils/functions/str) กับ [`mtcars`](http://www.rdocumentation.org/packages/datasets/functions/mtcars).

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# Investigate the structure of mtcars
```

*** =solution
```{r}
# Investigate the structure of mtcars
str(mtcars)
```

*** =sct
```{r}
output_msg <- paste("&#3588;&#3640;&#3603;&#3652;&#3604;&#3657;&#3651;&#3594;&#3657;&#32;&#102;&#117;&#110;&#99;&#116;&#105;&#111;&#110;", "`str()`", "&#3585;&#3633;&#3610;", "`mtcars`", "&#3627;&#3619;&#3639;&#3629;&#3618;&#3633;&#3591;&#63;")
# คุณได้ใช้ function `str()` กับ `mtcars` หรือยัง?

success_msg <- "&#3648;&#3618;&#3637;&#3656;&#3618;&#3617;&#33;&#32;&#3652;&#3611;&#3605;&#3656;&#3629;&#3607;&#3637;&#3656;&#3649;&#3610;&#3610;&#3613;&#3638;&#3585;&#3627;&#3633;&#3604;&#3605;&#3656;&#3629;&#3652;&#3611;&#3585;&#3633;&#3609;&#3648;&#3621;&#3618;"
# เยี่ยม! ไปต่อที่แบบฝึกหัดต่อไปกันเลย

test_output_contains("str(mtcars)", incorrect_msg = output_msg)
success_msg(success_msg)
```


--- type:NormalExercise xp:100 skills:1 key:df0b89706d90526b3c0bbe15e400b74cbd900704
## การสร้าง Data frame 

ในแบบฝึกหัดก่อนหน้านี้ เราให้คุณได้ลองดู data frame ตัวอย่างไปแล้ว คราวนี้เราจะให้คุณลองสร้าง data frame ด้วยตัวเองบ้าง!

เราอยากจะให้คุณลองสร้าง data frame ที่เก็บข้อมูลลักษณะเฉพาะตัวของดาวทั้ง 8 ดวงในระบบสุริยะเอาไว้ features หลักๆของดาวแต่ละดวงได้แก่:

- ประเภทพื้นผิวของดาว (Terrestrial หรือ Gas Giant).
- เส้นผ่านศูนย์กลางของดาวเทียบกับโลก
- ความเร็วในการหมุนรอบดวงอาทิตย์เทียบกับโลก
- มีวงแหวนรอบดาวหรือไม่ (TRUE หรือ FALSE).

อ้างอิงจาก [Wikipedia](http://en.wikipedia.org/wiki/Planet) คุณได้สร้าง vector ที่เก็บข้อมูลต่างๆไว้ดังนี้: `name`, `type`, `diameter`, `rotation` และ `rings` vector เหล่านี้ได้ถูกเตรียมไว้ให้ในโค้ดทางขวามือแล้ว ข้อมูลตัวแรกสุดจาก vector แต่ละตัวจะประกอบกันเป็นตัวอย่างแรกใน data set ของคุณ

คุณสามารถสร้าง data frame ได้ด้วย function [`data.frame()`](http://www.rdocumentation.org/packages/base/functions/data.frame) คุณแค่ใส่ vector ที่ได้กล่าวไปข้างต้นเป็น argument ของ function แล้ว vector เหล่านี้จะถูกเปลี่ยนให้กลายเป็นแต่ละคอลัมน์ใน data frame Because every column has the same length, the vectors you pass should also have the same length. But don't forget that it is possible (and likely) that they contain different types of data.

*** =instructions
Use the function [`data.frame()`](http://www.rdocumentation.org/packages/base/functions/data.frame) to construct a data frame. Pass the vectors `name`, `type`, `diameter`, `rotation` and `rings` as arguments to `data.frame()`, in this order. Call the resulting data frame `planets_df`.

*** =hint
Your `data.frame()` call starts as follows:
```
data.frame(planets, type, diameter)
```
Can you finish it?

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# Definition of vectors
name <- c("Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune")
type <- c("Terrestrial planet", "Terrestrial planet", "Terrestrial planet", 
          "Terrestrial planet", "Gas giant", "Gas giant", "Gas giant", "Gas giant")
diameter <- c(0.382, 0.949, 1, 0.532, 11.209, 9.449, 4.007, 3.883)
rotation <- c(58.64, -243.02, 1, 1.03, 0.41, 0.43, -0.72, 0.67)
rings <- c(FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE)

# Create a data frame from the vectors
planets_df <-

```

*** =solution
```{r}
# Definition of vectors
name <- c("Mercury", "Venus", "Earth", "Mars", "Jupiter", "Saturn", "Uranus", "Neptune")
type <- c("Terrestrial planet", "Terrestrial planet", "Terrestrial planet", 
          "Terrestrial planet", "Gas giant", "Gas giant", "Gas giant", "Gas giant")
diameter <- c(0.382, 0.949, 1, 0.532, 11.209, 9.449, 4.007, 3.883)
rotation <- c(58.64, -243.02, 1, 1.03, 0.41, 0.43, -0.72, 0.67)
rings <- c(FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE)

# Create a data frame from the vectors
planets_df <- data.frame(name, type, diameter, rotation, rings)
```

*** =sct
```{r}
msg = "Do not change anything about the definition of the vectors. Only add a `data.frame()` call to create `planets_df`."
test_object("name", undefined_msg = msg, incorrect_msg = msg)
test_object("type", undefined_msg = msg, incorrect_msg = msg)
test_object("diameter", undefined_msg = msg, incorrect_msg = msg)
test_object("rotation", undefined_msg = msg, incorrect_msg = msg)
test_object("rings", undefined_msg = msg, incorrect_msg = msg)

test_object("planets_df",
            incorrect_msg = "Have you correctly called `data.frame()` to create `planets_df`. Inside `data.frame()`, make sure to pass all vectors in the correct order: `name`, `type`, `diameter`, `rotation` and finally `rings`.")

success_msg("Great job! Continue to the next exercise. The logical next step, as you know by now, is inspecting the data frame you just created. Head over to the next exercise.");
```


--- type:NormalExercise xp:100 skills:1 key:c13ea421dd078030a225f49e53a8927ce8fefbe0
## Creating a data frame (2)

The `planets_df` data frame should have 8 observations and 5 variables. It has been made available in the workspace, so you can directly use it.

*** =instructions
Use [`str()`](http://www.rdocumentation.org/packages/utils/functions/str) to investigate the structure of the new `planets_df` variable.

*** =hint
`planets_df` is already available in your workspace, so `str(planets_df)` will do the trick.

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/intro_to_r/planets.RData"))
```

*** =sample_code
```{r}
# Check the structure of planets_df
```

*** =solution
```{r}
# Check the structure of planets_df
str(planets_df)
```

*** =sct
```{r}
msg = "Do not remove or overwrite the `planets_df` data frame that is already available in the workspace!"
test_object("planets_df", undefined_msg = msg, incorrect_msg = msg)
test_output_contains("str(planets_df)", incorrect_msg = "Have you correctly displayed the structure of `planets_df`? Use `str()` to do this!")
success_msg("Awesome! Now that you have a clear understanding of the `planets_df` data set, it's time to see how you can select elements from it. Learn all about in the next exercises!")
```


--- type:NormalExercise xp:100 skills:1 key:8c664726b8a173cda730cbb20a52ac1795d9a0e9
## Selection of data frame elements

Similar to vectors and matrices, you select elements from a data frame with the help of square brackets `[ ]`. By using a comma, you can indicate what to select from the rows and the columns respectively. For example:

- `my_df[1,2]` selects the value at the first row and select element in `my_df`.
- `my_df[1:3,2:4]` selects rows 1, 2, 3 and columns 2, 3, 4 in `my_df`.

Sometimes you want to select all elements of a row or column. For example, `my_df[1, ]` selects all elements of the first row. Let us now apply this technique on `planets_df`!

*** =instructions
- From `planets_df`, select the diameter of Mercury: this is the value at the first row and the third column. Simply print out the result.
- From `planets_df`, select all data on Mars (the fourth row). Simply print out the result.

*** =hint
To select the diameter for Venus (the second row), you would need: `planets_df[2,3]`. What do you need for Mercury then?

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/intro_to_r/planets.RData"))
```

*** =sample_code
```{r}
# The planets_df data frame from the previous exercise is pre-loaded

# Print out diameter of Mercury (row 1, column 3)


# Print out data for Mars (entire fourth row)

```

*** =solution
```{r}
# The planets_df data frame from the previous exercise is pre-loaded

# Print out diameter of Mercury (row 1, column 3)
planets_df[1,3]

# Print out data for Mars (entire fourth row)
planets_df[4, ]
```

*** =sct
```{r}
msg = "Do not remove or overwrite the `planets_df` data frame!"
test_object("planets_df", undefined_msg = msg, incorrect_msg = msg)
test_output_contains("planets_df[1,3]", incorrect_msg = "Have you correctly selected and printed out the diameter for Mercury? You can use `[1,3]`.")
test_output_contains("planets_df[4, ]", incorrect_msg = "Have you correctly selected and printed out all data for Mars? You can use `[4,]`.")
success_msg("Great! Apart from selecting elements from your data frame by index, you can also use the column names. To learn how, head over to the next exercise.")
```


--- type:NormalExercise xp:100 skills:1 key:faf104fb0c605fd89f048648a4a588200bc89c76
## Selection of data frame elements (2)

Instead of using numerics to select elements of a data frame, you can also use the variable names to select columns of a data frame. 

Suppose you want to select the first three elements of the `type` column. One way to do this is

```
planets_df[1:3,1]
```

A possible disadvantage of this approach is that you have to know (or look up) the column number of `type`, which gets hard if you have a lot of variables. It is often easier to just make use of the variable name:

```
planets_df[1:3,"type"]
```

*** =instructions
Select and print out the first 5 values in the `"diameter"` column of `planets_df`.

*** =hint
You can select the first five values with `planets_df[1:5, ...]`. Can you fill in the `...` bit to only select the `"diameter"` column?

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/intro_to_r/planets.RData"))
```

*** =sample_code
```{r}
# The planets_df data frame from the previous exercise is pre-loaded

# Select first 5 values of diameter column

```

*** =solution
```{r}
# The planets_df data frame from the previous exercise is pre-loaded

# Select first 5 values of diameter column
planets_df[1:5, "diameter"]
```

*** =sct
```{r}
msg = "Do not remove or overwrite the `planets_df` data frame!"
test_object("planets_df", undefined_msg = msg, incorrect_msg = msg)
test_output_contains("planets_df[1:5, \"diameter\"]", incorrect_msg = "Have you correctly selected the first five values from the diameter column and printed them out? You can use `[1:5, \"diameter\"]` here.")
success_msg("Nice! Continue to the next exercise!")
```


--- type:NormalExercise xp:100 skills:1 key:e550ecb6ec45b856e6160ddfbb3d7875998e8365
## Only planets with rings

You will often want to select an entire column, namely one specific variable from a data frame. If you want to select all elements of the variable `diameter`, for example, both of these will do the trick:

```
planets_df[,3]
planets_df[,"diameter"]
```

However, there is a short-cut. If your columns have names, you can use the `$` sign:

```
planets_df$diameter
```

*** =instructions
- Use the `$` sign to select the `rings` variable from `planets_df`. Store the vector that results as `rings_vector`.
- Print out `rings_vector` to see if you got it right.

*** =hint
`planets_df$diameter` selects the `diameter` column from `planets_df`; what do you need to select the `rings` column then?

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/intro_to_r/planets.RData"))
```

*** =sample_code
```{r}
# planets_df is pre-loaded in your workspace

# Select the rings variable from planets_df
rings_vector <- 
  
# Print out rings_vector
```

*** =solution
```{r}
# planets_df is pre-loaded in your workspace

# Select the rings variable from planets_df
rings_vector <- planets_df$rings

# Print out rings_vector
rings_vector
```

*** =sct
```{r}
msg = "Do not remove or overwrite the `planets_df` data frame!"
test_object("planets_df", undefined_msg = msg, incorrect_msg = msg)
test_object("rings_vector",
            incorrect_msg = "Have you correctly selected the `rings` variable from `planets_df`? Use `$rings`. Store the result as `rings_vector`.")
test_output_contains("rings_vector", incorrect_msg = "Don't forget to print out `rings_vector` after you've created it!")
success_msg("Great! Continue to the next exercise and discover yet another way of subsetting!")
```


--- type:NormalExercise xp:100 skills:1 key:1581bf4667477f274188f4f637ec7fdc73659651
## Only planets with rings (2)

You probably remember from high school that some planets in our solar system have rings and others do not. But due to other priorities at that time (read: puberty) you can not recall their names, let alone their rotation speed, etc. 

Could R help you out?

If you type `rings_vector` in the console, you get:

```
[1] FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE
```

This means that the first four observations (or planets) do not have a ring (`FALSE`), but the other four do (`TRUE`). However, you do not get a nice overview of the names of these planets, their diameter, etc. Let's try to use `rings_vector` to select the data for the four planets with rings. 

*** =instructions
The code on the right selects the `name` column of all planets that have rings. Adapt the code so that instead of only the `name` column, _all_ columns for planets that have rings are selected.

*** =hint
Remember that to select _all_ columns, you simply have to leave the columns part inside the `[ ]` empty! This means you'll need `[rings_vector, ]`.

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/intro_to_r/planets.RData"))
rings_vector <- planets_df$rings
```

*** =sample_code
```{r}
# planets_df and rings_vector are pre-loaded in your workspace

# Adapt the code to select all columns for planets with rings
planets_df[rings_vector, "name"]
```

*** =solution
```{r}
# planets_df and rings_vector are pre-loaded in your workspace

# Adapt the code to select all columns for planets with rings
planets_df[rings_vector, ]
```

*** =sct
```{r}
msg <- "Do not remove or overwrite `planets_df` or `rings_vector`!"
test_object("planets_df", undefined_msg = msg, incorrect_msg = msg)
test_object("rings_vector", undefined_msg = msg, incorrect_msg = msg)
test_output_contains('planets_df[rings_vector, ]', incorrect_msg = "Have you correctly adapted the code to select _all_ columns for the planets that have rings? You can use `planets_df[rings_vector, ]`. Make sure to include the comma here, it's crucial!")
success_msg("Wonderful! This is a rather tedious solution. The next exercise will teach you how to do it in a more concise way.")
```


--- type:NormalExercise xp:100 skills:1 key:a4a8b72a74097196eb2f8a28b056987aae834565
## Only planets with rings but shorter

So what exactly did you learn in the previous exercises? You selected a subset from a data frame (`planets_df`) based on whether or not a certain condition was true (rings or no rings), and you managed to pull out all relevant data. Pretty awesome! By now, NASA is probably already flirting with your CV ;-). 

Now, let us move up one level and use the function [`subset()`](http://www.rdocumentation.org/packages/base/functions/subset). You should see the [`subset()`](http://www.rdocumentation.org/packages/base/functions/subset) function as a short-cut to do exactly the same as what you did in the previous exercises. 

```
subset(my_df, subset = some_condition)
``` 

The first argument of [`subset()`](http://www.rdocumentation.org/packages/base/functions/subset) specifies the data set for which you want a subset. By adding the second argument, you give R the necessary information and conditions to select the correct subset. 

The code below will give the exact same result as you got in the previous exercise, but this time, you didn't need the `rings_vector`!

```
subset(planets_df, subset = rings)
``` 

*** =instructions
Use `subset()` on `planets_df` to select planets that have a diameter smaller than Earth. Because the `diameter` variable is a relative measure of the planet's diameter w.r.t that of planet Earth, your condition is `diameter < 1`.

*** =hint
`subset(planets_df, subset = ...)` almost solves it; can you fill in the `...`?

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/intro_to_r/planets.RData"))
```

*** =sample_code
```{r}
# planets_df is pre-loaded in your workspace

# Select planets with diameter < 1

```

*** =solution
```{r}
# planets_df is pre-loaded in your workspace

# Select planets with diameter < 1
subset(planets_df, subset = diameter < 1)
```

*** =sct
```{r}
msg = "Do not remove or overwrite the `planets_df` data frame!"
test_object("planets_df", undefined_msg = msg, incorrect_msg = msg)
test_correct({
  test_output_contains("subset(planets_df, subset = diameter < 1)", incorrect_msg = "Have you correctly specified the `subset = ...` part inside `subset()`. The condition in this case is `diameter < 1`. Simply print out the result.")  
}, {
  test_function("subset", args = "x", 
                not_called_msg = "Make sure to use the `subset()` function to perform the selection!",
                incorrect_msg = "The first argument you pass to `subset()` should be `planets_df`.")
})
success_msg("Great! Not only is the `subset()` function more concise, it is probably also more understandable for people who read your code. Continue to the next exercise.");
```


--- type:NormalExercise xp:100 skills:1 key:6a6fe74d3917c37380f7ac616ce084aa7814fb8a
## Sorting

Making and creating rankings is one of mankind's favorite affairs. These rankings can be useful (best universities in the world), entertaining (most influential movie stars) or pointless (best 007 look-a-like).

In data analysis you can sort your data according to a certain variable in the data set. In R, this is done with the help of the function [`order()`](http://www.rdocumentation.org/packages/base/functions/order). 

[`order()`](http://www.rdocumentation.org/packages/base/functions/order) is a function that gives you the ranked position of each element when it is applied on a variable, such as a vector for example:

```
> a <- c(100, 10, 1000)
> order(a)
[1] 2 1 3
```

10, which is the second element in `a`, is the smallest element, so 2 comes first in the output of `order(a)`. 100, which is the first element in `a` is the second smallest element, so 1 comes second in the output of `order(a)`.

This means we can use the output of `order(a)` to reshuffle `a`:
    
```
> a[order(a)]
[1]   10  100 1000
``` 

*** =instructions
Experiment with the [`order()`](http://www.rdocumentation.org/packages/base/functions/order) function in the console. Click 'Submit Answer' when you are ready to continue.

*** =hint
Just play with the [`order()`](http://www.rdocumentation.org/packages/base/functions/order) function in the console!

*** =pre_exercise_code
```{r}
# no pec
```

*** =sample_code
```{r}
# Play around with the order function in the console
```

*** =solution
```{r}
# Play around with the order function in the console
```

*** =sct
```{r}
success_msg("Great! Now let's use the `order()` function to sort your data frame!")
```


--- type:NormalExercise xp:100 skills:1 key:fa88b58bf2cf62e0c181dfdcbdd2e1ddeac66807
## Sorting your data frame

Alright, now that you understand the [`order()`](http://www.rdocumentation.org/packages/base/functions/order) function, let us do something useful with it. You would like to rearrange your data frame such that it starts with the smallest planet and ends with the largest one. A sort on the `diameter` column.

*** =instructions
- Call `order()` on `planets_df$diameter` (the `diameter` column of `planets_df`). Store the result as `positions`.
- Now reshuffle `planets_df` with the `positions` vector as row indexes inside square brackets. Keep all columns. Simply print out the result.

*** =hint
- Use `order(planets_df$diameter)` to create `positions`.
- Now, you can use `positions` inside square brackets: `planets_df[...]`; can you fill in the `...`?

*** =pre_exercise_code
```{r}
load(url("http://s3.amazonaws.com/assets.datacamp.com/course/intro_to_r/planets.RData"))
```

*** =sample_code
```{r}
# planets_df is pre-loaded in your workspace

# Use order() to create positions
positions <-  

# Use positions to sort planets_df

```

*** =solution
```{r}
# planets_df is pre-loaded in your workspace

# Use order() to create positions
positions <- order(planets_df$diameter)

# Use positions to sort planets_df
planets_df[positions, ]
```

*** =sct
```{r}
msg = "Do not remove or overwrite the `planets_df` data frame!"
test_object("planets_df", undefined_msg = msg, incorrect_msg = msg)
test_object("positions",
            incorrect_msg = "Have you correctly calculated the `positions` variable? You can use `sort(planets_df$diameter)`.")
test_output_contains("planets_df[positions,]",
                     incorrect_msg = "Use `planets_df[positions, ]` to sort `planets_df`; the comma inside the square brackets is crucial!")
success_msg("Wonderful! This exercise concludes the chapter on data frames. Remember that data frames are extremely important in R, you will need them all the time. Another very often used data structure is the list. This will be the subject of the next chapter!")
```


